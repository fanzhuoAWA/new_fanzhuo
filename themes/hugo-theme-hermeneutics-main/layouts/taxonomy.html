{{- define "main" -}}
<main class="container max-w-[var(--herm-main-width-nr)] mx-auto px-4 pt-[var(--herm-content-offset)] pb-16">
    <header class="mb-12">
        <div class="space-y-1">
            <h1 class="text-3xl font-medium">{{- .Title -}}</h1>
            <p text="sm muted-foreground/70">
                {{- if eq .Data.Singular "category" -}}
                共 {{ len (where .Site.RegularPages "Section" "posts") }} 篇文章，{{- len .Data.Terms }} 个分类
                {{- else if eq .Data.Singular "tag" -}}
                共 {{ len (where .Site.RegularPages "Section" "posts") }} 篇文章，{{- len .Data.Terms }} 个标签
                {{- else -}}
                共 {{ len (where .Site.RegularPages "Section" "posts") }} 篇文章，{{- len .Data.Terms }} 个系列
                {{- end -}}
            </p>
        </div>
    </header>

    <ul class="space-y-12">
        {{- $terms := .Data.Terms -}}
        {{- range $key, $value := $terms -}}
        <li class="group relative">
            <div class="hidden sm:block absolute left-0 top-8 bottom-0 w-px bg-gradient-to-b from-border/50 to-transparent"
                aria-hidden="true"></div>
            <div class="hidden sm:flex absolute left-[-4px] top-[1rem] w-2 h-2 rounded-full bg-primary/80" ring="4 background"
                aria-hidden="true"></div>

            <div class="sm:pl-8">
                <div class="flex items-center justify-between mb-4 pt-2">
                    <h2 class="text-xl font-medium">
                        <a href="{{- $value.Page.RelPermalink -}}" class="hover:text-primary transition-colors">
                            {{- $value.Page.Title -}}
                        </a>
                    </h2>
                    <span class="rounded-md" p="x-2.5 y-1" text="sm primary/80" ring="1 primary/20" aria-hidden="true">
                        {{- len $value.Pages -}}
                    </span>
                </div>

                {{- $pages := $value.Pages.ByDate.Reverse -}}
                {{- with index $pages 0 -}}
                <a href="{{- .RelPermalink -}}" aria-labelledby="{{ printf " term-%s-latest" (urlize $key) }}" class="block p-4 rounded-xl
                    backdrop-blur
                    transition-all duration-300" border="~ border/40 hover:border/60">
                    <div class="flex items-center justify-between gap-4">
                        <div class="min-w-0">
                            <h3 id="{{ printf " term-%s-latest" (urlize $key) }}"
                                class="text-base font-medium truncate">{{- .Title -}}</h3>
                            <div class="mt-1.5 flex items-center gap-3" text="sm muted-foreground/70">
                                <!-- 发布时间 -->
                                <div class="flex items-center gap-1" aria-hidden="true">
                                    <div class="i-carbon-time w-3.5 h-3.5"></div>
                                    <time class="tabular-nums">{{- .Date.Format "2006-01-02" -}}</time>
                                </div>
                                <!-- 标签 -->
                                {{- with .Params.tags -}}
                                <div class="hidden sm:flex items-center gap-1" aria-hidden="true">
                                    <div class="i-carbon-tag w-3.5 h-3.5"></div>
                                    <div class="flex items-center">
                                        {{- range $index, $tag := . -}}
                                        {{- if gt $index 0 -}}
                                        <span class="mx-1 opacity-40">·</span>
                                        {{- end -}}
                                        <span>{{- . -}}</span>
                                        {{- end -}}
                                    </div>
                                </div>
                                {{- end -}}
                                <!-- 阅读时间 -->
                                <div class="flex items-center gap-1" aria-hidden="true">
                                    <div class="i-carbon-book w-3.5 h-3.5"></div>
                                    <span class="tabular-nums">{{- .ReadingTime -}} min</span>
                                </div>
                            </div>
                        </div>
                        <div class="i-carbon-arrow-right w-5 h-5 text-muted-foreground/40 
                            group-hover:text-primary/80 transition-colors" aria-hidden="true"></div>
                    </div>
                </a>
                {{- end -}}
            </div>
        </li>
        {{- end -}}
    </ul>
</main>
{{- end -}}