{{- define "main" -}}

<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
{{- partial "utils/loadcss.html" "css/search/pagefind.css" -}}

<div class="search-container">
    <div class="flex flex-col items-center">
        <div class="mb-8 flex items-center gap-x-3 text-foreground/60 text-2xl">
            <i class="i-carbon-book h-8 w-8"></i>
            <span>{{- i18n "search.title" -}}</span>
        </div>
        <div class="mb-8 line-height-7 text-muted-foreground/70">
            <p>{{- i18n "search.desc" -}}</p>
        </div>
    </div>
    <div id="search-input" aria-label="search input"></div>
</div>

<!-- 引入 PageFind 的 CSS 和 JS -->
<script src="/pagefind/pagefind-ui.js" defer></script>

<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        const pagefind = new PagefindUI({
            element: "#search-input",
            showSubResults: false,
            debounceTimeoutMs: 300,
            showImages: false,
            translations: {
                placeholder: "或许你想找些什么？",
                clear_search: "重新开始",
                load_more: "再看看吧",
                search_label: "站内检索",
                filters_label: "文件分类",
                zero_results: "至少目前为止……我没有看到你说的东西。当然，更大的可能性是 PageFind 的锅。是的，相信我。",
            }
        });
        if (pagefind) {
            const input = document.querySelector('.pagefind-ui__search-input');
            if (input) {
                input.focus();
            }
        }
    });
</script>
{{- end -}}